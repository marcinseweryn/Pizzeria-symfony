{% extends 'templates/user.html.twig' %}

{% block body %}
<!-- menu -->
<div class="space-medium">
    <div class="container">
    	<div class="row mb-3">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="box">
            	<div class="row">
	                <div class="section-title">
						<h2>Delivery method</h2>
	                </div>
	             </div>
	             	<script type="text/javascript">
						function checkDelivery() {
						    if (document.getElementById('yesCheck').checked) {
						        document.getElementById('address').style.display = 'block';
						        document.getElementById('buttons').style.display = 'block';
						    }
						    else {
							    document.getElementById('address').style.display = 'none';
							    document.getElementById('buttons').style.display = 'block';
						    }		
						}
					</script>
					
				<form action="order/completed" method="post">
				<div class="menu-block mb-5">
				<div class="row">
	                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
	                    <div class="radio">
	                        <label>
	                            <input id="yesCheck" type="radio" name="delivery" value="Yes" onclick="javascript:checkDelivery();">
	                            <span>Delivery of pizza to address</span>
	                        </label>
	                    </div>
	                </div>
	                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
	                    <div class="radio">
	                        <label>
	                            <input type="radio" name="delivery" value="No" onclick="javascript:checkDelivery();">
	                            <span>Pickup in a pizzeria</span>
	                        </label>
	                    </div>
	                </div>
          		</div>  
				</div>
	            <div id="address" class="menu-block" style="display: none">
				<div class="row">
					<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
	                    <div class="form-group">
	                        <label class="control-label sr-only" for="city"> City</label>
	                        <input id="city" type="text" placeholder="City" class="form-control" required
	                        	name="city" value="{{ user.city }}">
	                    </div>
	                </div>
	                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
	                    <div class="form-group">
	                        <label class="control-label sr-only" for="address"> Address</label>
	                        <input id="address" type="text" placeholder="Address" class="form-control" required
	                        	name="address" value="{{ user.address }}">
	                    </div>
	                </div>
	                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
	                    <div class="form-group">
	                        <label class="control-label sr-only" for="postalCode"> Postal code</label>
	                        <input id="postalCode" type="text" placeholder="Postal Code" class="form-control" required
	                        	name="postalCode" value="{{ user.postalCode }}">
	                    </div>
	                </div>
		  
                </div>
                </div>
				
				<div id="buttons" class="menu-block mb-2" style="display: none">
				<div class="row"> 
					
						<input type="hidden" name="productID" value="{{ product.productID }}">
						
						<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<button class="btn btn-success btn-lg" name="action" value="order">Order now</button> 
						</div>
			</form>
						<form action="menu" method="post">
						<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<button class="btn btn-info btn-lg">Back to menu</button> 
						</div>
						</form> 
				</div>
				</div>        			  
			</div>
			</div>
			<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
				<div class="box ">
				<div class="row">
		        	<div class="section-title">
		            	<h2>Order</h2>
		        	</div>
		        	
		        	<div class="menu-block mb-1">
					<div class="row">
		                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
		                    <div class="table-responsive">
		                        <table class="table table-striped">
		                            <thead>
		                                <tr>
		                                    <th>Product</th>
		                                    <th class="text-center">Size</th>
		                                    <th class="text-center">Price</th>
		                                </tr>
		                            </thead>
		                            <tbody>
	               					<form action="order/pizza/remove" method="post">
		                           		<input type="hidden" name="productID" value="{{ product.productID }}">
			                            
			                            {% for orderProduct in orderProductsDetails %}
			                                <tr>
			                                    <td>{{ orderProduct["name"] }}</td>
			                                    <td class="text-center">{{ orderProduct["size"] }}</td>
			                                    <td class="text-center">${{ orderProduct["price"] }}</td>
			                                </tr>
			                            {% endfor %}
									</form>
							
		                            </tbody>
		                        </table>
		                    </div>
		                </div>
		            </div>	
		            </div>
		            
		            <div class="menu-block" style="margin-bottom: 50px; margin-left: 15px">
					<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<div class="dish-price">
			                	<p>Sum: ${{ sum }}</p>
			                </div>
	                	</div>   
					</div>
					</div>
					
		    	</div>
		    	</div>
			</div>
		</div>	  
	</div>
</div>
{% endblock %}
